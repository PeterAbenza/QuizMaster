<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Registro</title>
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/login.css">
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
	
	<div class="container">
	      <div class="login">
	          <h1>Registro</h1>
	          <form th:action="@{/criar-conta}" method="post">
	              <div class="form-group">
	                 <input type="text" class="form-control" name="name" placeholder="Nome" required="required">
	              </div>
	              <div class="form-group">
	                 <input type="email" class="form-control" name="email" placeholder="Email" required="required">
	              </div>
	              <div class="form-group">
	                  <input type="password" class="form-control" name="password" placeholder="Senha" required="required">
	              </div>
	              <div class="form-group">
	                  <input type="password" class="form-control" name="confirmPassword" placeholder="Confirmar Senha" required="required">
	              </div>
	              <!-- Exibir mensagem de erro -->
	              <div class="error" th:if="${errorMessage}" th:text="${errorMessage}"></div>
	              <button type="submit" class="btn btn-primary btn-block btn-large">Criar Conta</button>
	          </form>
	          
	          <!-- Link para voltar ao login -->
	          <div class="text-center mt-3">
	              <a href="/login" class="text-danger">Já tem uma conta? Faça login</a>
	          </div>
	      </div>
	 </div>
	 
	 <script>
	 document.getElementById("registerForm").addEventListener("submit", function(event) {
	     var name = document.querySelector('input[name="name"]').value;
	     var email = document.querySelector('input[name="email"]').value;
	     var emailRegex = /^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;
	     var validDomains = ["gmail.com", "hotmail.com", "yahoo.com"];
	     var password = document.querySelector('input[name="password"]').value;
	     var confirmPassword = document.querySelector('input[name="confirmPassword"]').value;

	     // Verifica se o nome tem pelo menos 3 caracteres
	     if (name.length < 3) {
	         alert("O nome deve ter pelo menos 3 caracteres.");
	         event.preventDefault();
	         return;
	     }

	     // Verifica o formato básico do email
	     if (!emailRegex.test(email)) {
	         alert("Por favor, insira um e-mail válido.");
	         event.preventDefault();
	         return;
	     }

	     // Verifica se o domínio está na lista de domínios válidos
	     var emailDomain = email.substring(email.indexOf("@") + 1);
	     if (!validDomains.includes(emailDomain)) {
	         alert("Domínio de e-mail inválido. Use um e-mail válido.");
	         event.preventDefault();
	         return;
	     }

	     // Verifica se as senhas coincidem
	     if (password !== confirmPassword) {
	         alert("As senhas não coincidem.");
	         event.preventDefault();
	     }
	 });
	 </script>



    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
